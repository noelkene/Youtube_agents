# YouTube Agent: Music Engagement Analysis

## Overview

This multi-agent system analyzes music engagement data from YouTube Shorts to identify trends and anomalies, providing insights for artists and marketing teams. The system consists of several agents that perform specific tasks, including data ingestion, anomaly detection, research, and report generation.

## File Structure

The `@YouTubeAgent` folder contains the following files:

-   `agent.py`: This file contains the core logic for the multi-agent system.
-   `__init__.py`: This file makes the `YouTubeAgent` folder a Python package.
-   `music_engagement_data.csv`: This is a sample CSV file containing music engagement data used for analysis.
-   `output/final_analysis_report.md`: This is where the final human-readable report is saved after analysis.

## Functionality

### `agent.py`

This file defines the agents, tools, and main execution logic for the music engagement analysis system. Here's a breakdown:

#### 1. Configuration
*   Sets up the Google Cloud Project ID, region, and model names.
*   Defines file paths for input data, anomaly storage, and final reports.
*   Configures analysis parameters like moving average window and standard deviation threshold.

#### 2. Google Search Function
*   `google_search(query: str) -> str`: Uses the `google.generativeai` library to perform Google searches and retrieve information based on a given query.

#### 3. Tool Functions for Agents
*   `data_ingestion_and_anomaly_detection_tool(tool_context: ToolContext) -> Dict[str, Any]`: Reads music engagement data from a CSV file, identifies statistical anomalies (spikes) in view counts, and saves the anomalies to a JSON file.
*   `hypothesis_evidence_and_reporting_tool(tool_context: ToolContext) -> Dict[str, Any]`: Reads detected anomalies, researches potential causes using Google Search, and synthesizes the findings into a final report in Markdown format.

#### 4. Agent Definitions
*   `data_agent`: An agent responsible for data ingestion and anomaly detection. It uses the `data_ingestion_and_anomaly_detection_tool`.
*   `reporting_agent`: An agent responsible for researching anomalies and generating a final report. It uses the `hypothesis_evidence_and_reporting_tool`.
*   `root_agent`: The orchestrator agent that manages the entire workflow. It defines the sequential flow of execution, calling the `data_agent` followed by the `reporting_agent`.

#### 5. Main Execution Logic
*   The `if __name__ == "__main__":` block demonstrates how the agents are invoked.
    *   It first calls the `data_ingestion_and_anomaly_detection_tool` to find anomalies.
    *   If anomalies are found, it then calls the `hypothesis_evidence_and_reporting_tool` to generate a report.

### `__init__.py`

This file simply imports the `agent` module, making it accessible as a package.

### `music_engagement_data.csv`

A sample CSV file containing music engagement data. The file has the following columns:

*   `date`: The date of the engagement data.
*   `track_id`: The unique identifier for the track.
*   `track_name`: The name of the track.
*   `artist_name`: The name of the artist.
*   `country`: The country where the engagement occurred.
*   `platform`: The platform where the engagement occurred (e.g., YouTube Shorts).
*   `views`: The number of views.
*   `likes`: The number of likes.
*   `comments`: The number of comments.
*   `shares`: The number of shares.

### `output/final_analysis_report.md`

This file is generated by the `reporting_agent` and contains the final analysis report in Markdown format. The report includes:

*   An executive summary of the key findings.
*   Detailed analysis of each detected anomaly, including plausible causes and confidence scores.
*   Overall conclusions and recommendations for the artist or marketing team.

## Usage

1.  Set up ADK following the instructions here https://google.github.io/adk-docs/
2. Run the ADK supported UI using "af web samples" from the root directory (the folder with the YouTubr demos should be in the samples folder)
3. You will select the Youtube Demo from the list of samples in the ADK UI
4. Good starting prompt "Analyze the music data for anomalies"
5. This should kick off the agent to detect anomalies and generate the reports
